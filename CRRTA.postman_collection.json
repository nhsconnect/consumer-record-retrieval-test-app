{
	"info": {
		"_postman_id": "1241ac74-1787-4e04-9e51-5c9f4db1d3fc",
		"name": "CRRTA",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Success",
			"item": [
				{
					"name": "JSON",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is ok\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"response is json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/fhir+json\");\r",
									"});\r",
									"\r",
									"pm.test(\"response has body\", function () {\r",
									"    pm.response.to.be.withBody;\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "XML",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "80a94487-c754-40f1-84fc-f98ae3a248af",
								"exec": [
									"pm.test(\"response is ok\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"response is xml\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/fhir+xml\");\r",
									"});\r",
									"\r",
									"pm.test(\"response has body\", function () {\r",
									"    pm.response.to.be.withBody;\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.xml",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.xml"
							]
						}
					},
					"response": []
				},
				{
					"name": "HTML",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "50da426b-f2c8-487e-8145-f57545806f0f",
								"exec": [
									"pm.test(\"response is ok\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"response is html\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/html\");\r",
									"});\r",
									"\r",
									"pm.test(\"response has body\", function () {\r",
									"    pm.response.to.be.withBody;\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.html",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.html"
							]
						}
					},
					"response": []
				},
				{
					"name": "PDF",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8443ccc7-9e47-4507-82cf-68ce91b987df",
								"exec": [
									"pm.test(\"response is ok\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"response is pdf\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/pdf\");\r",
									"});\r",
									"\r",
									"pm.test(\"response has body\", function () {\r",
									"    pm.response.to.be.withBody;\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.pdf",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.pdf"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Bad Provider URL",
			"item": [
				{
					"name": "Provider Nonexistent",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b78ccd15-cf5a-44a2-9461-f5772bee19fe",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2Fnonexistent.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2Fnonexistent.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Unparsable URL",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "467ef630-6985-4b6a-a4e6-698c28318e40",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https!!",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https!!"
							]
						}
					},
					"response": []
				},
				{
					"name": "Patient Nonexistent",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4ea156b1-f62d-449d-ad8d-1a5763c6e778",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F_____%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F_____%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Record Nonexistent",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2d0eaa38-8905-4760-9ee3-62f02d24ceb8",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F_____.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F_____.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Format Nonexistent",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5ac2889c-56ee-4db0-a659-979d63ed9b0b",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}._____",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}._____"
							]
						}
					},
					"response": []
				},
				{
					"name": "Incorrect URL Format",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5ac2889c-56ee-4db0-a659-979d63ed9b0b",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Incorrect Percent Encoding",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5ac2889c-56ee-4db0-a659-979d63ed9b0b",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https://{{provider}}.example.com/api/patients/{{patient}}/records/{{record}}.json",
							"protocol": "{{mockSspEndpoint}}/https",
							"host": [
								"{{provider}}",
								"example",
								"com"
							],
							"path": [
								"api",
								"patients",
								"{{patient}}",
								"records",
								"{{record}}.json"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Bad SSP Headers",
			"item": [
				{
					"name": "No Ssp-TraceID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}",
								"disabled": true
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "No Ssp-From",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text",
								"disabled": true
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "No Ssp-To",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}",
								"disabled": true
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "No Ssp-InteractionID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "{{sspInteractionId}}",
								"type": "text",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Empty Ssp-TraceID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": ""
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Empty Ssp-From",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": ""
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Empty Ssp-To",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": ""
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Empty Ssp-InteractionID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"value": "{{sspTraceId}}",
								"type": "text"
							},
							{
								"key": "Ssp-From",
								"value": "{{sspFrom}}",
								"type": "text"
							},
							{
								"key": "Ssp-To",
								"value": "{{sspTo}}",
								"type": "text"
							},
							{
								"key": "Ssp-InteractionID",
								"value": "",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid Ssp-TraceID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "0000"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid Ssp-From",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "0000"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid Ssp-To",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "0000"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "{{sspInteractionId}}"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid Ssp-InteractionID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ac21eda-c29c-4161-90d4-e9cd1bb21c2e",
								"exec": [
									"pm.test(\"response is error\", function () {\r",
									"    pm.response.to.be.error;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Ssp-TraceID",
								"type": "text",
								"value": "{{sspTraceId}}"
							},
							{
								"key": "Ssp-From",
								"type": "text",
								"value": "{{sspFrom}}"
							},
							{
								"key": "Ssp-To",
								"type": "text",
								"value": "{{sspTo}}"
							},
							{
								"key": "Ssp-InteractionID",
								"type": "text",
								"value": "0000"
							}
						],
						"url": {
							"raw": "{{mockSspEndpoint}}/https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json",
							"host": [
								"{{mockSspEndpoint}}"
							],
							"path": [
								"https%3A%2F%2F{{provider}}.example.com%2Fapi%2Fpatients%2F{{patient}}%2Frecords%2F{{record}}.json"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Bad JWT",
			"item": [],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "755492cf-027e-4e96-aca8-88b2712cc694",
				"type": "text/javascript",
				"exec": [
					"// modified from https://gist.github.com/corbanb/db03150abbe899285d6a86cc480f674d",
					"",
					"const base64url = source => {",
					"\t// Encode in classical base64",
					"\tencodedSource = CryptoJS.enc.Base64.stringify(source);",
					"",
					"\t// Remove padding equal characters",
					"\tencodedSource = encodedSource.replace(/=+$/, '');",
					"",
					"\t// Replace characters according to base64url specifications",
					"\tencodedSource = encodedSource.replace(/\\+/g, '-');",
					"\tencodedSource = encodedSource.replace(/\\//g, '_');",
					"",
					"\treturn encodedSource;",
					"};",
					"",
					"const header = {",
					"  \"alg\": \"none\",",
					"  \"typ\": \"JWT\"",
					"};",
					"",
					"const now = Math.floor(Date.now() / 1000);",
					"const in5Minutes = now + 5 * 60;",
					"",
					"const payload = {",
					"    iss: 'https://cas.nhs.uk',",
					"    sub: 'https://fhir.nhs.uk/Id/sds-role-profile-id|4387293874928',",
					"    aud: 'https://clinicals.spineservices.nhs.uk',",
					"    reason_for_request: 'directcare',",
					"    scope: 'patient/*.read',",
					"    requesting_system: 'https://fhir.nhs.uk/Id/accredited-system|200000000205',",
					"    requesting_user: 'https://fhir.nhs.uk/Id/sds-role-profile-id|4387293874928',",
					"    requesting_organization: 'https://fhir.nhs.uk/Id/ods-organization-code|12345',",
					"    iat: now,",
					"    exp: in5Minutes",
					"};",
					"",
					"// encode header",
					"const stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));",
					"const encodedHeader = base64url(stringifiedHeader);",
					"",
					"// encode data",
					"const stringifiedPayload = CryptoJS.enc.Utf8.parse(JSON.stringify(payload));",
					"const encodedPayload = base64url(stringifiedPayload);",
					"",
					"// build token",
					"const token = encodedHeader + \".\" + encodedPayload;",
					"",
					"// sign token",
					"const signedToken = token + \".\";",
					"",
					"pm.variables.set('jwt', signedToken);",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "8d7c23c6-f22e-4723-9418-9058cde29df1",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}